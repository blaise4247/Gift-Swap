<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GiftSwap | Professional Secret Santa</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Mountains+of+Christmas:wght@700&display=swap" rel="stylesheet">
    <style>
        /* --- 1. THEME VARIABLES --- */
        :root {
            --bg: #FCFAFA; --card: #FFFFFF; --text: #2D2D2D;
            --primary: #D0312D; --secondary: #1A3C34; --accent: #F7E7CE;
            --border: #E5E5E5; --input-bg: #FFFFFF; --header-text: #888;
            --nav-bg: #FFFFFF; --footer-bg: #F5F5F5;
        }
        [data-theme="dark-santa"] {
            --bg: #121212; --card: #1E1E1E; --text: #E0E0E0;
            --primary: #FF4545; --secondary: #00E676; --accent: #333333;
            --border: #333333; --input-bg: #2C2C2C; --header-text: #AAAAAA;
            --nav-bg: #1E1E1E; --footer-bg: #1A1A1A;
        }
        [data-theme="tropical"] {
            --bg: #E0F7FA; --card: #FFFFFF; --text: #006064;
            --primary: #FF7043; --secondary: #009688; --accent: #FFECB3;
            --border: #B2DFDB; --input-bg: #FFFFFF; --header-text: #00796B;
            --nav-bg: #FFFFFF; --footer-bg: #E0F2F1;
        }
        [data-theme="winter"] {
            --bg: #ECEFF1; --card: #FFFFFF; --text: #263238;
            --primary: #0288D1; --secondary: #546E7A; --accent: #CFD8DC;
            --border: #CFD8DC; --input-bg: #FAFAFA; --header-text: #78909C;
            --nav-bg: #FFFFFF; --footer-bg: #CFD8DC;
        }

        /* --- 2. GLOBAL RESET --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); transition: background 0.3s, color 0.3s; display: flex; flex-direction: column; min-height: 100vh; }

        /* --- 3. NAVIGATION --- */
        nav { display: flex; justify-content: space-between; align-items: center; padding: 15px 5%; background: var(--nav-bg); border-bottom: 1px solid var(--border); position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .logo { font-family: 'Mountains of Christmas', cursive; font-size: 1.8rem; color: var(--primary); cursor: pointer; user-select: none; }
        .nav-links { display: flex; gap: 20px; align-items: center; }
        .nav-item { cursor: pointer; font-weight: 600; font-size: 0.9rem; opacity: 0.7; transition: 0.2s; }
        .nav-item:hover { opacity: 1; color: var(--primary); }
        .theme-select { padding: 6px 10px; border-radius: 8px; border: 1px solid var(--border); background: var(--input-bg); color: var(--text); cursor: pointer; font-family: inherit; font-size: 0.85rem; }

        /* --- 4. LAYOUT & SECTIONS --- */
        main { flex: 1; padding: 40px 5%; max-width: 1200px; margin: 0 auto; width: 100%; }
        section { display: none; animation: fadeIn 0.4s ease-out; }
        .active-section { display: block !important; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- 5. FOOTER --- */
        footer { background: var(--footer-bg); padding: 30px 5%; text-align: center; border-top: 1px solid var(--border); margin-top: auto; }
        .footer-links { display: flex; justify-content: center; gap: 20px; margin-bottom: 15px; }
        .footer-link { cursor: pointer; font-size: 0.9rem; opacity: 0.6; text-decoration: underline; }
        .copyright { font-size: 0.8rem; opacity: 0.5; }

        /* --- 6. COMPONENT STYLES --- */
        .group-card { background: var(--card); border: 1px solid var(--border); padding: 25px; border-radius: 16px; position: relative; cursor: pointer; transition: 0.2s; }
        .group-card:hover { transform: translateY(-4px); border-color: var(--primary); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .groups-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-top: 30px; }
        .delete-btn { position: absolute; top: 15px; right: 15px; color: #aaa; font-weight: bold; font-size: 1.2rem; cursor: pointer; padding: 5px; }
        .delete-btn:hover { color: var(--primary); }

        input[type="text"], input[type="email"] { width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--input-bg); color: var(--text); font-size: 1rem; outline: none; transition: 0.2s; }
        input:focus { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(0,0,0,0.05); }
        
        .group-name-input { font-size: 2rem; font-weight: 700; border: none !important; border-bottom: 3px solid var(--border) !important; background: transparent !important; border-radius: 0 !important; padding: 10px 0 !important; margin-bottom: 20px; color: var(--secondary) !important; }
        .budget-input { font-size: 1.2rem; border: none !important; border-bottom: 2px solid var(--border) !important; width: 150px !important; background: transparent !important; border-radius: 0 !important; color: var(--text) !important; }

        .participant-container { background: var(--card); border-radius: 20px; border: 1px solid var(--border); padding: 30px; box-shadow: 0 5px 20px rgba(0,0,0,0.03); }
        .p-row { display: grid; grid-template-columns: 1.5fr 1.5fr 2.5fr 0.5fr; gap: 15px; margin-bottom: 15px; align-items: start; }
        
        .exclusion-box { background: var(--bg); border: 1px solid var(--border); border-radius: 8px; padding: 10px; max-height: 120px; overflow-y: auto; }
        .exclusion-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        .exclusion-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; cursor: pointer; user-select: none; }
        .exclusion-item input { width: auto; cursor: pointer; }

        .btn { border: none; padding: 12px 24px; border-radius: 50px; font-weight: 600; cursor: pointer; transition: 0.2s; font-size: 1rem; }
        .btn-primary { background: var(--primary); color: white; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.15); }
        .btn-outline { background: transparent; border: 2px solid var(--primary); color: var(--primary); }
        .btn-outline:hover { background: var(--bg); }
        .btn-remove { background: rgba(255,0,0,0.1); color: #ff4444; padding: 12px; border-radius: 8px; display: flex; align-items: center; justify-content: center; }

        /* Reveal Page */
        .reveal-card { background: var(--card); border: 2px solid var(--primary); border-radius: 30px; padding: 50px 30px; text-align: center; max-width: 600px; margin: 40px auto; box-shadow: 0 20px 60px rgba(0,0,0,0.15); }
        .reveal-name { font-size: 3rem; color: var(--secondary); font-family: 'Mountains of Christmas'; margin: 20px 0; line-height: 1.2; }
        .shop-btn { display: inline-block; background: #FF9900; color: black; text-decoration: none; padding: 15px 30px; border-radius: 8px; font-weight: bold; margin-top: 20px; transition: 0.2s; }
        
        /* Modals */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: none; align-items: center; justify-content: center; z-index: 2000; }
        .modal-content { background: var(--card); width: 90%; max-width: 600px; padding: 40px; border-radius: 20px; max-height: 85vh; overflow-y: auto; text-align: center; }
        .link-row, .master-row { background: var(--bg); border: 1px solid var(--border); padding: 15px; border-radius: 10px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; text-align: left; }
        .copy-btn { background: var(--secondary); color: white; padding: 6px 12px; border-radius: 6px; font-size: 0.9rem; margin-left: 10px; }

        /* Text Pages (About, Terms) */
        .text-page { max-width: 800px; margin: 0 auto; line-height: 1.8; }
        .text-page h2 { color: var(--secondary); margin-bottom: 20px; font-size: 2rem; }
        .text-page h3 { color: var(--primary); margin-top: 30px; }

        @media (max-width: 768px) {
            .nav-links { display: none; } /* Could add hamburger menu later */
            .p-row { grid-template-columns: 1fr; gap: 10px; padding-bottom: 20px; border-bottom: 1px solid var(--border); }
        }
    </style>
</head>
<body data-theme="santa">

    <nav>
        <div style="display:flex; align-items:center; gap:30px;">
            <div class="logo" onclick="app.navigate('home')">GiftSwap</div>
            <div class="nav-links">
                <div class="nav-item" onclick="app.navigate('home')">Home</div>
                <div class="nav-item" onclick="app.navigate('about')">About</div>
                <div class="nav-item" onclick="app.navigate('help')">Help</div>
            </div>
        </div>
        <div style="display:flex; gap:10px; align-items:center;">
            <select class="theme-select" id="themeSelector" onchange="app.setTheme(this.value)">
                <option value="santa">üéÖ Santa</option>
                <option value="dark-santa">üåô Dark</option>
                <option value="tropical">üèùÔ∏è Tropical</option>
                <option value="winter">‚ùÑÔ∏è Winter</option>
            </select>
        </div>
    </nav>

    <main>
        <section id="homeSection" class="active-section">
            <div style="text-align: center; margin-bottom: 50px;">
                <h1 style="font-size: 3.5rem; color: var(--secondary); margin-bottom: 10px;">Stress-Free <span style="color:var(--primary)">Secret Santa</span></h1>
                <p style="opacity: 0.7; max-width:600px; margin: 0 auto;">The modern way to organize gift exchanges. Create groups, set budgets, and share magic links instantly.</p>
                <button class="btn btn-primary" onclick="app.createGroup()" style="margin-top: 30px;">+ Create New Group</button>
            </div>
            <div id="groupsGrid" class="groups-grid"></div>
        </section>

        <section id="editorSection">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                <button class="btn btn-outline" onclick="app.navigate('home')">‚Üê Back to Dashboard</button>
                <button class="btn btn-outline" onclick="app.showMasterList()" style="border-color:var(--secondary); color:var(--secondary);">üìú View Master List (Admin)</button>
            </div>

            <input type="text" id="groupName" class="group-name-input" placeholder="Untitled Group" oninput="app.updateMeta('name', this.value)">
            <div style="margin-bottom: 30px; display: flex; align-items: center; gap: 10px;">
                <span style="font-weight: 600; color: var(--primary)">Budget:</span>
                <input type="text" id="groupBudget" class="budget-input" placeholder="e.g. $25" oninput="app.updateMeta('budget', this.value)">
            </div>

            <div class="participant-container">
                <div id="rowsContainer"></div>
                <div style="margin-top: 30px; display: flex; gap: 15px; flex-wrap:wrap;">
                    <button class="btn btn-outline" onclick="app.addPerson()">+ Add Person</button>
                    <button class="btn btn-primary" style="flex-grow: 1;" onclick="app.generateLinks()">Generate Shareable Links</button>
                </div>
            </div>
        </section>

        <section id="revealSection">
            <div class="reveal-card">
                <div style="font-size: 4rem;">üéÅ</div>
                <h3 id="revGroup" style="color: var(--header-text); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 10px;">Group Name</h3>
                <p>Hi <strong id="revGiver">Name</strong>! Your assignment is:</p>
                <div id="revTarget" class="reveal-name">???</div>
                <p style="font-size: 1.2rem; margin-bottom: 20px;">Budget: <strong id="revBudget" style="color: var(--primary);">$0</strong></p>
                <div style="background: var(--bg); padding: 20px; border-radius: 12px; border: 1px dashed var(--secondary);">
                    <p style="margin-bottom: 10px; font-size: 0.9rem;">Find the perfect gift:</p>
                    <a href="#" target="_blank" id="amzLink" class="shop-btn">Browse Amazon</a>
                </div>
            </div>
        </section>

        <section id="aboutSection" class="text-page">
            <h2>About GiftSwap</h2>
            <p>GiftSwap is a free tool designed to make Secret Santa exchanges easy and privacy-focused. We don't store your data on our servers; everything lives in your browser and the links you share.</p>
        </section>

        <section id="helpSection" class="text-page">
            <h2>How to Use</h2>
            <h3>1. Create a Group</h3>
            <p>Click "New Group" on the dashboard. Give it a name and set a budget.</p>
            <h3>2. Add Participants</h3>
            <p>Enter names. If two people shouldn't match (e.g. couples), check the exclusion box.</p>
            <h3>3. Share Links</h3>
            <p>Click "Generate". Send the unique link to each person via text or email.</p>
        </section>

        <section id="privacySection" class="text-page">
            <h2>Privacy Policy</h2>
            <p><strong>Effective Date:</strong> Dec 2025</p>
            <p>We do not collect personal data. All names and emails entered are stored locally on your device (LocalStorage) and encoded into shareable links. We do not use cookies for tracking.</p>
        </section>
        
        <section id="termsSection" class="text-page">
            <h2>Terms of Service</h2>
            <p>By using GiftSwap, you agree that we are not responsible for any gift dissatisfaction (or socks received). We participate in the Amazon Associates Program and may earn commissions from qualifying purchases.</p>
        </section>
    </main>

    <footer>
        <div class="footer-links">
            <span class="footer-link" onclick="app.navigate('privacy')">Privacy Policy</span>
            <span class="footer-link" onclick="app.navigate('terms')">Terms of Service</span>
            <span class="footer-link" onclick="app.navigate('help')">Help Center</span>
        </div>
        <div class="copyright">&copy; 2025 GiftSwap. All rights reserved.</div>
    </footer>

    <div class="modal-overlay" id="linksModal">
        <div class="modal-content">
            <h2 style="font-family:'Mountains of Christmas'; font-size: 2rem; color: var(--primary); margin-bottom: 10px;">Links Generated!</h2>
            <p style="margin-bottom: 20px; font-size: 0.9rem; color: var(--header-text);">Send these links. Matches are now saved to the Master List.</p>
            <div id="linksList"></div>
            <button class="btn btn-outline" style="width: 100%; margin-top: 20px;" onclick="document.getElementById('linksModal').style.display='none'">Done</button>
        </div>
    </div>

    <div class="modal-overlay" id="masterModal">
        <div class="modal-content">
            <h2 style="color: var(--secondary); margin-bottom: 10px;">Master List</h2>
            <p style="margin-bottom: 20px; color: #ff4444; font-size: 0.9rem;">‚ö†Ô∏è Keep this private! This reveals all matches.</p>
            <div id="masterList"></div>
            <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" onclick="document.getElementById('masterModal').style.display='none'">Close</button>
        </div>
    </div>

<script>
const app = {
    data: JSON.parse(localStorage.getItem('giftSwapDB_v2')) || {},
    activeId: null,

    init: function() {
        const savedTheme = localStorage.getItem('giftSwapTheme');
        if (savedTheme) this.setTheme(savedTheme);

        const params = new URLSearchParams(window.location.search);
        const drawPayload = params.get('draw');

        if (drawPayload) {
            this.handleReveal(drawPayload);
        } else {
            this.navigate('home');
        }
    },

    setTheme: function(name) {
        document.body.setAttribute('data-theme', name);
        localStorage.setItem('giftSwapTheme', name);
        document.getElementById('themeSelector').value = name;
    },

    navigate: function(page) {
        // Hide all sections
        document.querySelectorAll('section').forEach(el => el.classList.remove('active-section'));
        
        // Show specific section
        if (page === 'home') {
            this.activeId = null;
            this.renderHome();
            document.getElementById('homeSection').classList.add('active-section');
        } else if (page === 'about') document.getElementById('aboutSection').classList.add('active-section');
        else if (page === 'help') document.getElementById('helpSection').classList.add('active-section');
        else if (page === 'privacy') document.getElementById('privacySection').classList.add('active-section');
        else if (page === 'terms') document.getElementById('termsSection').classList.add('active-section');
        
        // Reset URL if not revealing
        if (!window.location.search.includes('draw')) {
            window.history.pushState({}, document.title, window.location.pathname);
        }
    },

    // --- HOME & GROUP LOGIC ---
    renderHome: function() {
        const grid = document.getElementById('groupsGrid');
        grid.innerHTML = "";
        const keys = Object.keys(this.data);

        if (keys.length === 0) {
            grid.innerHTML = `<div style="grid-column: 1/-1; text-align: center; color: #999; padding: 40px;">No groups yet. Start a new one!</div>`;
            return;
        }

        keys.forEach(id => {
            const group = this.data[id];
            const div = document.createElement('div');
            div.className = 'group-card';
            div.innerHTML = `
                <div class="delete-btn" onclick="app.deleteGroup(event, '${id}')">√ó</div>
                <h3 style="color: var(--secondary); margin-bottom: 5px;">${group.name || "Untitled Group"}</h3>
                <p style="font-size: 0.9rem; opacity: 0.7;">${group.participants.length} Participants</p>
                <p style="font-size: 0.8rem; margin-top:5px; color:${group.matches ? '#28a745' : '#aaa'}">${group.matches ? 'Matches Generated ‚úì' : 'Draft'}</p>
            `;
            div.onclick = () => this.loadGroup(id);
            grid.appendChild(div);
        });
    },

    createGroup: function() {
        const id = 'g_' + Date.now();
        this.data[id] = {
            name: "", budget: "", matches: null,
            participants: [
                { id: 1, name: "", email: "", exclusions: [] },
                { id: 2, name: "", email: "", exclusions: [] },
                { id: 3, name: "", email: "", exclusions: [] }
            ]
        };
        this.loadGroup(id);
    },

    deleteGroup: function(e, id) {
        e.stopPropagation();
        if (confirm("Delete this group?")) {
            delete this.data[id];
            this.save();
            this.renderHome();
        }
    },

    loadGroup: function(id) {
        this.activeId = id;
        document.querySelectorAll('section').forEach(el => el.classList.remove('active-section'));
        document.getElementById('editorSection').classList.add('active-section');
        
        document.getElementById('groupName').value = this.data[id].name;
        document.getElementById('groupBudget').value = this.data[id].budget;
        this.renderRows();
    },

    // --- EDITOR LOGIC ---
    updateMeta: function(field, val) {
        if (!this.activeId) return;
        this.data[this.activeId][field] = val;
        this.save();
    },

    renderRows: function() {
        const container = document.getElementById('rowsContainer');
        container.innerHTML = "";
        const participants = this.data[this.activeId].participants;

        participants.forEach((p, index) => {
            const row = document.createElement('div');
            row.className = 'p-row';
            
            const nameInput = document.createElement('input');
            nameInput.type = "text"; nameInput.placeholder = "Name"; nameInput.value = p.name;
            nameInput.oninput = (e) => { p.name = e.target.value; this.save(); };
            nameInput.onblur = () => { this.renderExclusionsOnly(); };

            const emailInput = document.createElement('input');
            emailInput.type = "text"; emailInput.placeholder = "Reference (Optional)"; emailInput.value = p.email;
            emailInput.oninput = (e) => { p.email = e.target.value; this.save(); };

            const exclBox = document.createElement('div');
            exclBox.className = 'exclusion-box'; exclBox.id = `excl_box_${index}`;

            const delBtn = document.createElement('button');
            delBtn.className = 'btn btn-remove'; delBtn.innerHTML = "√ó";
            delBtn.onclick = () => { participants.splice(index, 1); this.renderRows(); this.save(); };

            row.append(nameInput, emailInput, exclBox, delBtn);
            container.appendChild(row);
        });
        this.renderExclusionsOnly();
    },

    renderExclusionsOnly: function() {
        const participants = this.data[this.activeId].participants;
        participants.forEach((p, i) => {
            const box = document.getElementById(`excl_box_${i}`);
            if (!box) return;
            box.innerHTML = "";
            const grid = document.createElement('div'); grid.className = 'exclusion-grid';

            participants.forEach((other, j) => {
                if (i !== j && other.name.trim() !== "") {
                    const label = document.createElement('label');
                    label.className = 'exclusion-item';
                    const isChecked = p.exclusions.includes(other.name) ? "checked" : "";
                    label.innerHTML = `<input type="checkbox" ${isChecked}><span>${other.name}</span>`;
                    label.querySelector('input').onchange = (e) => {
                        if (e.target.checked) p.exclusions.push(other.name);
                        else p.exclusions = p.exclusions.filter(n => n !== other.name);
                        this.save();
                    };
                    grid.appendChild(label);
                }
            });
            box.appendChild(grid);
        });
    },

    addPerson: function() {
        this.data[this.activeId].participants.push({ id: Date.now(), name: "", email: "", exclusions: [] });
        this.renderRows();
        this.save();
    },

    // --- ALGORITHM & MATCHES ---
    generateLinks: function() {
        const group = this.data[this.activeId];
        const active = group.participants.filter(p => p.name.trim() !== "");
        if (active.length < 3) return alert("Need at least 3 people!");

        let givers = [...active], receivers = [...active], isValid = false, attempts = 0;
        while (!isValid && attempts < 2000) {
            attempts++;
            receivers.sort(() => Math.random() - 0.5);
            isValid = givers.every((g, i) => g.name !== receivers[i].name && !g.exclusions.includes(receivers[i].name));
        }

        if (!isValid) return alert("Exclusions make this draw impossible.");

        // SAVE MATCHES TO MASTER LIST
        group.matches = givers.map((g, i) => ({ giver: g.name, receiver: receivers[i].name }));
        this.save();

        const list = document.getElementById('linksList'); list.innerHTML = "";
        const theme = document.body.getAttribute('data-theme');

        givers.forEach((g, i) => {
            const r = receivers[i];
            const payload = { g: group.name, b: group.budget, s: g.name, t: r.name, th: theme };
            
            // Encode
            const token = btoa(encodeURIComponent(JSON.stringify(payload)).replace(/%([0-9A-F]{2})/g, (m, p1) => String.fromCharCode('0x' + p1)));
            const link = `${window.location.origin}${window.location.pathname}?draw=${token}`;

            const row = document.createElement('div'); row.className = 'link-row';
            row.innerHTML = `<div><strong>${g.name}</strong></div><button class="btn copy-btn" onclick="app.copyLink('${link}', this)">Copy Link</button>`;
            list.appendChild(row);
        });

        document.getElementById('linksModal').style.display = 'flex';
    },

    showMasterList: function() {
        const group = this.data[this.activeId];
        if (!group.matches) return alert("No matches generated yet! Click 'Generate Shareable Links' first.");
        
        const list = document.getElementById('masterList');
        list.innerHTML = "";
        
        group.matches.forEach(m => {
            const div = document.createElement('div');
            div.className = 'master-row';
            div.innerHTML = `<strong>${m.giver}</strong> <span>‚û°Ô∏è</span> <strong>${m.receiver}</strong>`;
            list.appendChild(div);
        });
        document.getElementById('masterModal').style.display = 'flex';
    },

    copyLink: function(text, btn) {
        navigator.clipboard.writeText(text).then(() => {
            const old = btn.innerText; btn.innerText = "Copied!"; btn.style.background = "#4CAF50";
            setTimeout(() => { btn.innerText = old; btn.style.background = ""; }, 2000);
        });
    },

    handleReveal: function(token) {
        try {
            const json = decodeURIComponent(atob(token).split('').map(c => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)).join(''));
            const data = JSON.parse(json);

            if (data.th) this.setTheme(data.th);
            
            // Hide Nav
            document.querySelector('nav').style.display = 'none';
            document.querySelector('footer').style.display = 'none';

            document.getElementById('revGroup').innerText = data.g;
            document.getElementById('revGiver').innerText = data.s;
            document.getElementById('revTarget').innerText = data.t;
            document.getElementById('revBudget').innerText = data.b || "No Budget";
            
            document.getElementById('amzLink').href = `https://www.amazon.com/s?k=${encodeURIComponent('gifts for ' + (data.b || 'everyone'))}`;

            document.querySelectorAll('section').forEach(el => el.classList.remove('active-section'));
            document.getElementById('revealSection').classList.add('active-section');
        } catch (e) {
            console.error(e);
            alert("Invalid Link");
            this.navigate('home');
        }
    },

    save: function() { localStorage.setItem('giftSwapDB_v2', JSON.stringify(this.data)); }
};

window.onload = function() { app.init(); };
</script>
</body>
</html>